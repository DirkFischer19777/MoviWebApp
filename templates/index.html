{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2>Users</h2>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="messages">
          {% for category, message in messages %}
            <div class="alert {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- User list -->
    {% if users %}
      <ul class="user-list">
        {% for user in users %}
          <li>
            <a href="{{ url_for('user_movies', user_id=user.id) }}">
              ðŸ‘¤ {{ user.name }}
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No users found yet. Add your first user below!</p>
    {% endif %}

    <!-- Add new user -->
    <h3>Add a New User</h3>
    <form action="{{ url_for('add_user') }}" method="post" class="add-form">
        <input type="text" name="name" placeholder="Enter user name" required>
        <button type="submit" class="btn add">âž• Add User</button>
    </form>
</div>
{% endblock %}
